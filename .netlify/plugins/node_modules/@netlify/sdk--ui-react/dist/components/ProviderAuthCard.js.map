{"version":3,"file":"ProviderAuthCard.js","sources":["../../src/components/ProviderAuthCard.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { useNetlifySDK } from \"../use_netlify_sdk.js\";\nimport { Button } from \"./Button/Button.jsx\";\nimport { ButtonGroup } from \"./Button/ButtonGroup.jsx\";\nimport { Card, CardTitle } from \"./vendor/Card/main.js\";\n\nexport const ProviderAuthCard = () => {\n  const sdk = useNetlifySDK();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isConfirmingDisconnect, setIsConfirmingDisconnect] = useState(false);\n  const isConnected = sdk.context.auth.providerToken !== null;\n\n  useEffect(() => {\n    setIsConfirmingDisconnect(false);\n    setIsLoading(false);\n  }, [setIsConfirmingDisconnect, setIsLoading]);\n\n  const onClickConnect = useCallback(() => {\n    setIsLoading(true);\n    void sdk.beginProviderAuthFlow();\n  }, [sdk, setIsLoading]);\n\n  const onClickDisconnect = useCallback(() => {\n    setIsConfirmingDisconnect(true);\n  }, [setIsConfirmingDisconnect]);\n\n  const onConfirmDisconnect = useCallback(() => {\n    setIsLoading(true);\n    void sdk.disconnectProviderAuth();\n  }, [sdk, setIsLoading]);\n\n  const onCancelDisconnect = useCallback(() => {\n    setIsConfirmingDisconnect(false);\n  }, [setIsConfirmingDisconnect]);\n\n  return (\n    <Card>\n      <CardTitle>\n        Your Netlify account is {isConnected ? \"\" : \"not \"}connected to{\" \"}\n        {sdk.extension.name}\n      </CardTitle>\n\n      <ButtonGroup className=\"tw-mt-4\">\n        {!isConnected && (\n          <Button onClick={onClickConnect} loading={isLoading}>\n            {isLoading ? \"Connecting\" : \"Connect\"}\n          </Button>\n        )}\n\n        {isConnected && !isConfirmingDisconnect && (\n          <Button onClick={onClickDisconnect}>Disconnect</Button>\n        )}\n\n        {isConnected && isConfirmingDisconnect && (\n          <>\n            <Button\n              onClick={onConfirmDisconnect}\n              loading={isLoading}\n              variant=\"danger\"\n            >\n              Confirm Disconnect\n            </Button>\n            <Button\n              disabled={isLoading}\n              onClick={onCancelDisconnect}\n              level=\"secondary\"\n            >\n              Cancel\n            </Button>\n          </>\n        )}\n      </ButtonGroup>\n    </Card>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;AAMO,MAAM,mBAAmB,MAAM;AACpC,QAAM,MAAM,cAAA;AACZ,QAAM,CAAC,WAAW,YAAY,IAAI,SAAS,KAAK;AAChD,QAAM,CAAC,wBAAwB,yBAAyB,IAAI,SAAS,KAAK;AAC1E,QAAM,cAAc,IAAI,QAAQ,KAAK,kBAAkB;AAEvD,YAAU,MAAM;AACd,8BAA0B,KAAK;AAC/B,iBAAa,KAAK;AAAA,EACpB,GAAG,CAAC,2BAA2B,YAAY,CAAC;AAE5C,QAAM,iBAAiB,YAAY,MAAM;AACvC,iBAAa,IAAI;AACjB,SAAK,IAAI,sBAAA;AAAA,EACX,GAAG,CAAC,KAAK,YAAY,CAAC;AAEtB,QAAM,oBAAoB,YAAY,MAAM;AAC1C,8BAA0B,IAAI;AAAA,EAChC,GAAG,CAAC,yBAAyB,CAAC;AAE9B,QAAM,sBAAsB,YAAY,MAAM;AAC5C,iBAAa,IAAI;AACjB,SAAK,IAAI,uBAAA;AAAA,EACX,GAAG,CAAC,KAAK,YAAY,CAAC;AAEtB,QAAM,qBAAqB,YAAY,MAAM;AAC3C,8BAA0B,KAAK;AAAA,EACjC,GAAG,CAAC,yBAAyB,CAAC;AAE9B,8BACG,MAAA,EACC,UAAA;AAAA,IAAA,qBAAC,WAAA,EAAU,UAAA;AAAA,MAAA;AAAA,MACgB,cAAc,KAAK;AAAA,MAAO;AAAA,MAAa;AAAA,MAC/D,IAAI,UAAU;AAAA,IAAA,GACjB;AAAA,IAEA,qBAAC,aAAA,EAAY,WAAU,WACpB,UAAA;AAAA,MAAA,CAAC,mCACC,QAAA,EAAO,SAAS,gBAAgB,SAAS,WACvC,UAAA,YAAY,eAAe,UAAA,CAC9B;AAAA,MAGD,eAAe,CAAC,8CACd,QAAA,EAAO,SAAS,mBAAmB,UAAA,cAAU;AAAA,MAG/C,eAAe,0BACd,qBAAA,UAAA,EACE,UAAA;AAAA,QAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,SAAS;AAAA,YACT,SAAQ;AAAA,YACT,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAGD;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,UAAU;AAAA,YACV,SAAS;AAAA,YACT,OAAM;AAAA,YACP,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED,EAAA,CACF;AAAA,IAAA,EAAA,CAEJ;AAAA,EAAA,GACF;AAEJ;"}