{"version":3,"file":"Checkbox.js","sources":["../../../src/components/vendor/Checkbox.tsx"],"sourcesContent":["/* eslint-disable -- vendored file from netlify-react-ui/components/ui */\n// @ts-nocheck -- vendored file from netlify-react-ui/components/ui\n\nimport { cn } from \"@netlify/ui\";\nimport { useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport AlertSmall from \"./AlertSmall/AlertSmall.js\";\n\nconst WrapperCN = ({ outset, variant }) =>\n  cn(\n    outset && outset,\n    variant.startsWith(\"pill\") && `tw-inline-block`,\n    variant === \"inline-block\" &&\n      `\n    tw-mr-2\n    tw-inline-block\n  `,\n  );\n\nconst InputLoadingCN = ({ type }) =>\n  cn(\n    \"tw-appearance-none\",\n    \"tw-border\",\n    \"tw-w-5\",\n    \"tw-h-5\",\n    \"tw-absolute\",\n    \"tw-checkbox-loading\",\n    \"tw-bg-teal-darker\",\n    \"tw-p-2\",\n    \"tw-opacity-54\",\n    \"tw-pointer-events-none\",\n    \"tw-bg-loading-stripes\",\n    \"tw-bg-stripes-light\",\n    \"motion-safe:tw-animate-loading-stripes\",\n    \"tw-bg-repeat-x\",\n    \"tw-top-auto\",\n    \"tw-bg-clip-border\",\n    \"dark:tw-border-gray\",\n    \"dark:tw-bg-teal-lighter\",\n    type === \"radio\" ? `tw-rounded-full` : `tw-rounded-sm`,\n  );\n\nconst checkboxTypeCN = ({ disabled, checked, indeterminate }) =>\n  cn(\n    \"tw-rounded-sm\",\n    \"before:tw-h-[11px]\",\n    \"before:tw-inline-block\",\n    \"before:tw-w-[3px]\",\n    \"before:tw-rounded-sm\",\n    \"before:tw-left-2\",\n    \"before:tw-top-[13px]\",\n    \"before:tw-transform\",\n    \"before:tw-rotate-[-135deg]\",\n    \"after:tw-w-[3px]\",\n    \"after:tw-h-[7px]\",\n    \"after:tw-rounded-sm\",\n    \"after:tw-content-empty\",\n    \"after:tw-absolute\",\n    \"after:tw-top-[7px]\",\n    \"after:tw-transform\",\n    \"after:tw--rotate-45\",\n    \"after:tw-left-1\",\n    disabled && !checked && \"tw-bg-checkbox-disabled\",\n    \"indeterminate:before:tw-w-2.5\",\n    \"indeterminate:before:tw-h-[3px]\",\n    \"indeterminate:before:tw-left-1\",\n    \"indeterminate:before:tw-top-[7.5px]\",\n    \"indeterminate:before:tw-rotate-0\",\n    \"indeterminate:before:tw-bg-gray-dark\",\n    \"indeterminate:before:hover:tw-bg-gray-darker\",\n    \"indeterminate:before:dark:tw-bg-gray-light\",\n    \"indeterminate:before:dark:hover:tw-border-gray-lighter\",\n    \"indeterminate:before:tw-rounded-full\",\n    \"indeterminate:before:tw-content-empty\",\n  );\n\nconst radioTypeCN = ({ disabled, checked }) =>\n  cn(\n    \"tw-rounded-full\",\n    \"checked:before:tw-rounded-full\",\n    \"checked:before:tw-h-2\",\n    \"checked:before:tw-w-2\",\n    \"checked:before:tw-opacity-100\",\n    \"checked:before:tw-top-1/2\",\n    \"checked:before:tw-left-1/2\",\n    \"checked:before:tw-transform\",\n    \"checked:before:tw--translate-x-1/2\",\n    \"checked:before:tw--translate-y-1/2\",\n    checked &&\n      cn(\n        \"before:tw-rounded-full\",\n        \"before:tw-h-2\",\n        \"before:tw-w-2\",\n        \"before:tw-opacity-100\",\n        \"before:tw-top-1/2\",\n        \"before:tw-left-1/2\",\n        \"before:tw-transform\",\n        \"before:tw--translate-x-1/2\",\n        \"before:tw--translate-y-1/2\",\n        disabled\n          ? cn(\n              \"before:tw-bg-gray-darker\",\n              \"!dark:tw-bg-gray-darker\",\n              \"dark:tw-border-gray-darker\",\n              \"dark:before:tw-bg-gray\",\n              \"checked:before:tw-bg-gray-dark\",\n              \"checked:tw-border-gray-light\",\n              \"checked:tw-bg-gray-light\",\n            )\n          : \"before:tw-bg-gray-lightest checked:before:tw-bg-gray-lightest dark:before:tw-bg-gray-darkest\",\n      ),\n  );\n\nconst InputCN = ({ type, disabled, variant, checked, indeterminate }) =>\n  cn(\n    \"tw-appearance-none\",\n    \"tw-border\",\n    \"tw-w-5\",\n    \"tw-h-5\",\n    \"tw-p-0\",\n    \"tw-cursor-pointer\",\n    \"tw-mr-2\",\n    \"!tw-mt-0.5\",\n    \"tw-mb-0\",\n    \"tw-ml-0.5\",\n    \"tw-box-border\",\n    \"tw-absolute\",\n    \"tw-top-auto\",\n    \"before:tw-absolute\",\n    \"before:tw-content-empty\",\n    \"before:tw-origin-top-left\",\n    \"focus:tw-outline-0\",\n    \"focus:tw-ring focus:tw-ring-offset-1\",\n    !checked &&\n      !disabled &&\n      \"tw-border-gray-dark hover:tw-border-gray-darker dark:tw-border-gray-light dark:hover:tw-border-gray-lighter\",\n    !disabled &&\n      cn(\n        \"checked:tw-bg-teal\",\n        \"checked:tw-border-teal\",\n        \"checked:hover:focus:tw-border-teal-lighter\",\n        \"checked:after:tw-bg-teal-darkest\",\n        \"checked:before:tw-bg-teal-darkest\",\n      ),\n    \"dark:tw-bg-gray-darkest\",\n    \"dark:checked:tw-bg-teal-lighter\",\n    \"dark:checked:tw-border-teal-lighter\",\n    \"dark:checked:hover:tw-bg-teal\",\n    \"dark:checked:hover:tw-border-teal\",\n    \"dark:disabled:tw-bg-gray-darker\",\n    checked &&\n      !disabled &&\n      cn(\n        \"tw-bg-teal\",\n        \"tw-border-teal\",\n        \"hover:tw-border-teal-lighter\",\n        \"hover:focus:tw-border-teal-lighter\",\n        \"after:tw-bg-teal-darkest\",\n        \"before:tw-bg-teal-darkest\",\n        \"hover:tw-bg-teal-lighter\",\n        \"focus:tw-border-teal-lighter\",\n        \"dark:tw-bg-teal-lighter\",\n        \"dark:tw-border-teal\",\n        \"dark:hover:tw-bg-teal-lighter\",\n      ),\n    disabled &&\n      cn(\n        \"tw-cursor-not-allowed\",\n        \"tw-pointer-events-auto\",\n        \"tw-border-gray-light\",\n        \"tw-bg-gray-light\",\n        \"hover:tw-border-gray-light\",\n        \"after:tw-bg-gray-dark\",\n        \"before:tw-bg-gray-dark\",\n        \"dark:!tw-bg-gray-dark\",\n        \"dark:!tw-border-gray-dark\",\n        \"dark:after:tw-bg-gray-light\",\n        \"dark:before:tw-bg-gray-light\",\n        !checked && \"before:tw-hidden after:tw-hidden\",\n      ),\n    checked &&\n      disabled &&\n      cn(\n        \"tw-border-gray-light\",\n        \"tw-bg-gray-light\",\n        \"hover:tw-bg-gray-light\",\n        \"hover:tw-border-gray-light\",\n        \"dark:after:tw-bg-gray-light\",\n        \"dark:before:tw-bg-gray-light\",\n        \"dark:tw-bg-gray-dark\",\n      ),\n    variant.startsWith(\"pill\") &&\n      cn(\n        \"tw-absolute\",\n        \"!tw-w-0\",\n        \"tw-p-0\",\n        \"tw-m-0\",\n        \"tw-border-0\",\n        \"tw-opacity-0\",\n      ),\n    type === \"radio\" && radioTypeCN({ disabled, checked }),\n    type === \"checkbox\" && checkboxTypeCN({ disabled, checked, indeterminate }),\n  );\n\nconst LabelCN = ({ disabled, variant, labelClassName }) =>\n  cn(\n    variant.startsWith(\"pill\")\n      ? cn(\n          \"tw-inline-block\",\n          \"tw-px-4\",\n          \"tw-rounded-sm\",\n          \"tw-py-1\",\n          \"tw-border-2\",\n          \"tw-border-gray-light\",\n          \"tw-text-gray-darkest\",\n          \"tw-font-medium\",\n          \"hover:tw-bg-gray-lighter\",\n          \"label-checked:tw-border-teal-darker\",\n          \"label-focus:tw-bg-gray-lighter\",\n          \"label-focus:tw-border-teal\",\n          \"dark:tw-border-gray-dark\",\n          \"dark:tw-text-gray-lightest\",\n          \"dark:hover:tw-bg-gray-darker\",\n          \"dark:label-checked:tw-border-teal-lighter\",\n          \"dark:label-focus:tw-bg-gray-darker\",\n        )\n      : `tw-block tw-pl-8`,\n    variant === \"pill-large\" && \"!tw-px-10 !tw-py-4 tw-text-center\",\n    \"tw-cursor-pointer\",\n    \"tw-text-base\",\n    \"tw-text-gray-darkest\",\n    // XXX(ndhoule): I disabled this because I just can't handle that this is the ONLY title that's\n    // bold across our form components. Why this inconsistency???\n    // \"tw-font-semibold\",\n    \"dark:tw-text-gray-lightest\",\n    disabled && `tw-cursor-not-allowed`,\n    labelClassName,\n  );\n\nconst errorMessageCN = cn(\"!tw-mx-2\", \"!tw-cursor-default\");\n\nconst helpTextCN = cn(\n  \"tw-text-textMuted\",\n  \"tw-text-sm\",\n  \"tw-ml-8\",\n  \"tw-mt-0\",\n  \"tw-font-regular\",\n  \"dark:tw-text-gray-lighter\",\n);\n\ntype BaseProps = {\n  variant?: \"default\" | \"pill\" | \"pill-large\" | \"inline-block\";\n  name?: string;\n  value?: string;\n  checked?: boolean;\n  controlledChecked?: boolean;\n  required?: boolean;\n  title?: string;\n  label: string | React.ReactNode;\n  helpText?: string | React.ReactNode;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  disabled?: boolean;\n  loading?: boolean;\n  tabIndex?: number | string;\n  error?: string;\n  outset?: string | number;\n  labelClassName?: string;\n};\n\ntype CheckboxSpecificProps = {\n  type?: \"checkbox\";\n  /** **Warning**: You must manage state for this prop on your own. Only pass it `true` when you know `checked` isn't `true`.\n   *\n   * Generally, this will only be used when the checkbox controls a group and you set the indeterminate state when all/some/none of the group checkboxes are checked.\n   *\n   * **UX Note**: The indeterminate state is only supported for checkboxes and only for the default variant.\n   */\n  indeterminate?: boolean;\n};\n\ntype RadioSpecificProps = {\n  type: \"radio\";\n};\n\nexport type CheckboxProps = BaseProps &\n  (CheckboxSpecificProps | RadioSpecificProps);\n\nconst Checkbox = (\n  {\n    type = \"checkbox\",\n    variant = \"default\",\n    name,\n    value,\n    checked,\n    controlledChecked,\n    required,\n    title,\n    label,\n    helpText,\n    onChange,\n    disabled,\n    loading,\n    tabIndex,\n    error,\n    outset,\n    labelClassName,\n    ...specificProps\n  }: CheckboxProps,\n  ref: React.Ref<HTMLInputElement>\n) => {\n  const checkRef = useRef<HTMLInputElement | null>(null);\n  useImperativeHandle(ref, () => checkRef.current, []);\n  const uuid = crypto.randomUUID();\n  const helpTextId = `help-${uuid}`;\n  const errorId = `error-${uuid}`;\n  const describedBy = `${error ? errorId : \"\"} ${helpText ? helpTextId : \"\"}`;\n\n  const indeterminate =\n    (\"indeterminate\" in specificProps && specificProps.indeterminate) || false;\n\n  useEffect(() => {\n    if (checkRef.current && type === \"checkbox\") {\n      checkRef.current.indeterminate = indeterminate;\n    }\n  }, [indeterminate, type]);\n\n  return (\n    <div className={WrapperCN({ outset, variant })}>\n      <label>\n        {loading ? (\n          <input className={InputLoadingCN({ type })} disabled />\n        ) : (\n          <input\n            data-testid=\"checkbox\"\n            ref={checkRef}\n            className={InputCN({\n              type,\n              disabled,\n              variant,\n              checked: checked || controlledChecked,\n              indeterminate,\n            })}\n            type={type}\n            name={name}\n            value={value}\n            defaultChecked={checked}\n            checked={controlledChecked}\n            required={required}\n            title={title}\n            {...(tabIndex && { tabIndex: +tabIndex })}\n            onChange={onChange}\n            disabled={!!(disabled || loading)}\n            aria-describedby={describedBy}\n          />\n        )}\n        <span className={LabelCN({ disabled, variant, labelClassName })}>\n          {label}\n          {error && (\n            <AlertSmall\n              id={errorId}\n              className={errorMessageCN}\n              variant=\"form-field\"\n              error={error}\n              inline\n            />\n          )}\n        </span>\n      </label>\n      {helpText && (\n        <div id={helpTextId} className={helpTextCN}>\n          {helpText}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default forwardRef<HTMLInputElement, CheckboxProps>(Checkbox);\n"],"names":[],"mappings":"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"}