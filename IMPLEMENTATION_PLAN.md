# Focus Finder Game Improvement Plan

## Overview
根據用戶反饋，遊戲存在以下主要問題需要改進：
1. 物件偵測不準確
2. 音效太單調
3. 全螢幕跳出問題
4. 遊戲太簡單
5. 干擾太少
6. 反饋不足

## Stage 1: 物件偵測優化 & 全螢幕穩定性
**Goal**: 提高物件偵測準確度，修復全螢幕跳出問題
**Priority**: CRITICAL
**Status**: ✅ COMPLETED

### Tasks:
- [x] 調整物件偵測參數
  - ✅ 降低信心閾值從 0.4 到 0.35
  - ✅ 增加最大偵測數從 15 到 20
  - ⏭️ 偵測頻率保持不變（由遊戲主循環控制）
- [x] 補充缺失的物件映射
  - ✅ 添加 'mirror' 映射（映射到 tv, monitor, window, laptop）
  - ✅ 添加 'keys' 映射（映射到 scissors, fork, knife, remote, cell phone）
  - ✅ 添加 'sky' 的替代識別（映射到 sky, cloud, ceiling）
  - ✅ 增強所有物件的替代識別選項（例如：cup 可能被識別為 bowl）
- [x] 增強物件偵測視覺反饋
  - ✅ 顯示當前偵測到的物件（綠色提示框）
  - ✅ 顯示目標物件提示（灰色提示框）
  - ✅ 添加偵測成功的動畫效果（脈衝動畫）
- [x] 修復全螢幕跳出問題
  - ✅ 加強全螢幕事件監聽器（支援所有瀏覽器）
  - ✅ 添加自動重新進入邏輯（最多 3 次嘗試）
  - ✅ 在干擾任務期間防止重新進入（避免干擾玩家）
  - ✅ 增加延遲時間從 100ms 到 200ms（確保事件處理完成）

**Success Criteria**:
- ✅ 物件偵測參數已優化
- ✅ 物件映射已補充完整
- ✅ 視覺反饋已添加
- ✅ 全螢幕穩定性已改善
- ✅ 建置成功無錯誤

**Tests**:
- ⏳ 需要實際測試各種物件的偵測準確度
- ⏳ 需要測試全螢幕在不同瀏覽器的穩定性
- ⏳ 需要測試視覺反饋是否清晰

---

## Stage 2: 增加遊戲難度 & 干擾頻率
**Goal**: 提升遊戲挑戰性，增加干擾任務頻率
**Priority**: HIGH
**Status**: Not Started

### Tasks:
- [ ] 調整遊戲難度參數
  - 減少任務超時時間從 20 秒到 15 秒
  - 增加分數扣除從 -15 到 -20
  - 調整專注力恢復機制
- [ ] 大幅增加干擾頻率
  - 將干擾間隔從 8 秒減少到 5 秒
  - 增加同時觸發的干擾數量上限
  - 調整干擾權重，增加特殊任務比例
- [ ] 添加新的干擾機制
  - 連鎖干擾：完成一個干擾可能觸發另一個
  - 時間壓力干擾：在特定時間點強制觸發
  - 多重干擾：同時出現 2 個干擾任務
- [ ] 調整難度曲線
  - 前 30 秒：溫和（每 8-10 秒一個干擾）
  - 中 30 秒：適中（每 5-7 秒一個干擾）
  - 後 30 秒：困難（每 3-5 秒一個干擾）

**Success Criteria**:
- 遊戲完成率降低到 30-40%（更具挑戰性）
- 玩家感受到明顯的時間壓力
- 干擾任務頻繁但不會完全壓倒玩家

**Tests**:
- 測試不同難度下的完成率
- 測試干擾觸發時機是否合理
- 測試玩家是否能在壓力下完成任務

---

## Stage 3: 音效系統增強
**Goal**: 豐富音效體驗，減少單調感
**Priority**: HIGH
**Status**: Not Started

### Tasks:
- [ ] 增加音效變化
  - 為每種干擾類型添加 3-5 種不同音效
  - 隨機選擇音效避免重複
  - 添加音效組合（主音效 + 環境音）
- [ ] 改善背景音樂
  - 添加動態背景音樂層次
  - 根據遊戲進度改變音樂強度
  - 在高壓力時段增加緊張音效
- [ ] 優化音效混合
  - 實現更好的音量平衡
  - 避免音效重疊造成混亂
  - 添加音效淡入淡出
- [ ] 添加情境音效
  - 任務完成時的勝利音效變化
  - 時間緊迫時的心跳加速音效
  - 專注力低時的警告音效

**Success Criteria**:
- 音效不再單調重複
- 音效能增強遊戲氛圍
- 音效不會造成聽覺疲勞

**Tests**:
- 測試音效多樣性
- 測試音量平衡
- 測試長時間遊玩的音效體驗

---

## Stage 4: 反饋系統改進
**Goal**: 增強遊戲反饋，讓玩家清楚了解遊戲狀態
**Priority**: MEDIUM
**Status**: Not Started

### Tasks:
- [ ] 增強任務進度顯示
  - 顯示當前任務編號（X/8）
  - 顯示剩餘任務列表
  - 添加任務完成進度條
- [ ] 改善物件偵測反饋
  - 實時顯示偵測到的物件
  - 顯示偵測信心度
  - 添加「接近目標」提示
- [ ] 增強干擾任務說明
  - 更清楚地解釋為什麼要找其他物件
  - 顯示干擾任務的影響
  - 添加干擾任務計數器
- [ ] 添加遊戲狀態指示器
  - 專注力條更明顯
  - 時間剩餘更突出
  - 分數變化動畫
- [ ] 改善結算畫面
  - 簡化統計數據展示
  - 突出關鍵指標
  - 添加改進建議

**Success Criteria**:
- 玩家能清楚知道當前遊戲狀態
- 玩家理解每個操作的影響
- 反饋及時且清晰

**Tests**:
- 測試新玩家是否能理解遊戲機制
- 測試反饋是否及時
- 測試UI是否清晰易懂

---

## Stage 5: 代碼優化 & 性能改進
**Goal**: 清理代碼，提升性能
**Priority**: LOW
**Status**: Not Started

### Tasks:
- [ ] 移除未使用的變數和代碼
- [ ] 重構音效播放邏輯
- [ ] 優化偵測循環性能
- [ ] 添加錯誤處理和降級方案
- [ ] 改善代碼可讀性

**Success Criteria**:
- 無 TypeScript 警告
- 代碼更易維護
- 性能提升 10% 以上

**Tests**:
- 運行 linter 檢查
- 性能測試
- 代碼審查

---

## Implementation Order
1. **Stage 1** (CRITICAL) - 物件偵測 & 全螢幕 - 預計 1-2 小時
2. **Stage 2** (HIGH) - 遊戲難度 & 干擾頻率 - 預計 1 小時
3. **Stage 3** (HIGH) - 音效系統 - 預計 1-2 小時
4. **Stage 4** (MEDIUM) - 反饋系統 - 預計 1 小時
5. **Stage 5** (LOW) - 代碼優化 - 預計 30 分鐘

## Notes
- 每個 Stage 完成後進行測試
- 每個 Stage 完成後提交代碼
- 遵循 new.md 中的開發規範
- 最多嘗試 3 次，如果卡住則重新評估方案

